<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="net.edu.module.dao.EnrollUserDao">


    <select id="getEnrollUserByPage" resultType="net.edu.module.vo.EnrollUserVO">
        select id,wx_name,name,phone,union_id,open_id,area,address,age,grade,purpose,status,create_time,
        update_time,login_time,start_number,end_number,remark,integral,balance,deleted,creator,updater,version
        from enroll_user
        where deleted = 0
        <if test="query.getName() !=null and query.getName()!=''">
            and name = #{query.name}
        </if>
        <if test="query.getStatus() !=null ">
            and status = #{query.status}
        </if>
        <if test="query.getArea() !=null and query.getArea()!=''">
            and area =#{query.area}
        </if>
        <if test="query.getPurpose() !=null and query.getPurpose()!=''">
            and purpose like concat('%',#{query.purpose},'%')
        </if>
        <if test="query.getBeginTime() !=null and query.getBeginTime()!='' and query.getEndTime() !=null and query.getEndTime()!=''">
            and create_time &gt;=#{query.beginTime}  and create_time &lt;=#{query.endTime}
        </if>
        order by update_time desc
    </select>

    <update id="deleteEnrollUser">
        update enroll_user  set deleted=1 where id = #{id}
    </update>

    <update id="confirmEnrollUser">
        update enroll_user set status=status+1
        where id=#{id}
    </update>
</mapper>
